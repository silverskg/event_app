<div class="form-group">
  <% if @event.errors.include?(:name)%>
    <p style="color: red; font-weight:850;"><%= @event.errors.full_messages_for(:name).first %></p>
  <% end %>
  <div class="select_box">
    <%= form.label :name, "作業項目" %>
    <%= form.select :name, [["屋根の吹き替え"],["瓦差し替え工事"] ,["棟の修理"],["漆喰工事"], ["片付け"], ["雨樋の交換"], ["塗装工事"], ["その他"]], {include_blank: "選択して下さい"}, { class: 'form-control' , required: true } %>
  </div>
  <!-- /.select_box -->
</div>

<div class="form-group">
  <% if @event.errors.include?(:place)%>
    <p style="color: red; font-weight:850;"><%= @event.errors.full_messages_for(:place).first %></p>
  <% end %>
  <%= form.label :place %>
  <%= form.text_field :place, class: "form-control" %>
</div>
<div class="form-group">
  <%= form.label :start_time %>
  <div class="form-calendar">
    <%= form.text_field :date, id: "date-form", placeholder: "選択してください"%>
  </div>
  <div>
    <%= form.time_field :start_time, value:"08:00"%>
    <%= form.time_field :end_time, value:"17:30" %>
  </div>
</div>

<div class="form-group">
  <%= form.file_field :image, accept: "image/png,image/jpeg,image/gif" %> 
</div>
<!-- /.form-group -->

<div class="select_box">
    <%= form.label :period, "期間" %>
    <%= form.select :period, [["1日"],["1~2日"] ,["3日"],["１週間"], ["2週間"], ["3週間"], ["1ヶ月"], ["その他"]], {include_blank: "おおよその期間を選んで下さい"}, { class: 'form-control' , required: true } %>
  </div>
  <!-- /.select_box -->

<div class="form-group">
  <% if @event.errors.include?(:content)%>
    <p style="color: red; font-weight:850;"><%= @event.errors.full_messages_for(:content).first %></p>
  <% end %>
  <%= form.label :content %>
  <%= form.text_area :content, class: "form-control", row: 10 %>
</div>
<%= form.submit class: "btn btn-primary btn-lg btn-block" %>
<div class="exit-btn">
  <%= link_to '戻る', @event, class: "btn btn-primary btn-block" %>
</div>

<script>
document.addEventListener('turbolinks:load', () => {
  flatpickr.localize(flatpickr.l10ns.ja)
  const TODAY = new Date(new Date().setHours(0, 0, 0, 0))
  const A_MONTH_AGO = new Date(TODAY.getFullYear(), TODAY.getMonth() - 1, TODAY.getDate())
  const A_MONTH_AHEAD = new Date(TODAY.getFullYear(), TODAY.getMonth() + 2, TODAY.getDate())
  flatpickr('#date-form', {
    disableMobile: true,
    maxDate: A_MONTH_AHEAD,
    minDate: TODAY,
    defaultDate: TODAY,
    dateFormat: 'Y/m/d (D)'
  });
})
</script>
